<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>GrapesJS Chart Plugin</title>
        <link
            href="https://unpkg.com/grapesjs/dist/css/grapes.min.css"
            rel="stylesheet"
        />
        <script src="https://unpkg.com/grapesjs"></script>
        <script src="dist/grapesjs-chart-donut.min.js"></script>
        <script src="https://unpkg.com/grapesjs-blocks-bootstrap4@0.1.16/dist/grapesjs-blocks-bootstrap4.min.js"></script>
        <script src="https://unpkg.com/grapesjs-blocks-flexbox@0.1.1/dist/grapesjs-blocks-flexbox.min.js"></script>
        <script src="https://unpkg.com/grapesjs-plugin-export@1.0.7/dist/grapesjs-plugin-export.min.js"></script>
        <script src="https://unpkg.com/grapesjs-indexeddb@0.1.1/dist/grapesjs-indexeddb.min.js"></script>
        <style>
            body,
            html {
                height: 100%;
                margin: 0;
            }
        </style>
    </head>
    <body>
        <div id="gjs" style="height:0px; overflow:hidden"></div>
        <script type="text/javascript">
            var editor = grapesjs.init({
                height: '100%',
                noticeOnUnload: 0,
                storageManager: { autoload: 0 },
                container: '#gjs',
                fromElement: true,
                allowScripts: 1,
                storageManager: {
                    type: 'indexeddb',
                    // In case of multiple editors on the same page indicate an id to
                    // prevent collisions
                    id: 'gis',
                    autosave: false,
                    autoload: false,
                },
                plugins: [
                    'gjs-chart-donut',
                    'grapesjs-blocks-bootstrap4',
                    'gjs-blocks-flexbox',
                    'grapesjs-plugin-export',
                    'grapesjs-indexeddb',
                ],
                pluginsOpts: {
                    'gjs-chart-donut': {},
                    'grapesjs-blocks-bootstrap4': {
                        blocks: {
                            form: false,
                            button: false,
                            button_group: false,
                            button_toolbar: false,
                            input: false,
                            input_group: false,
                            form_group_input: false,
                            textarea: false,
                            checkbox: false,
                            radio: false,
                            select: false,
                            label: false,
                        },
                        blockCategories: {
                            layout: true,
                            components: false,
                            forms: false,
                            typography: true,
                            basic: true,
                        },
                    },
                    'gjs-blocks-flexbox': {
                        labelRow: 'flexrow',
                        labelColumn: 'flexcol',
                        flexboxBlock: ['Layout'],
                    },
                    'grapesjs-indexeddb': {
                        // options
                    },
                    'grapesjs-plugin-export': {
                        filename: editor => 'gis-poc.zip',
                    },
                },
                canvas: {
                    styles: [
                        '//www.zingchart.com/css/zcDocs.css',
                        'https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css',
                    ],
                    scripts: [
                        '//cdn.zingchart.com/zingchart.min.js',
                        '//www.zingchart.com/scripts/zcDocs.js',
                        '//code.jquery.com/jquery-2.1.4.min.js',
                    ],
                },
                script: function() {
                    zingchart.MODULESDIR = 'https://cdn.zingchart.com/modules/'
                    ZC.LICENSE = ['xxx', 'xxx']
                },
            })
            const bm = editor.BlockManager
            editor.on('load', () => {
                editor.BlockManager.render([
                    bm.get('flexbox').set('category', 'Layout'),
                ])
            })
        </script>
    </body>
</html>
